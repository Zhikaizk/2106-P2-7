@using Project.Models.Feedback
@{
  var hello = FeedbackTDG1.findAll();
  var hello1 = FeedbackTDG1.getPendingFeedback();
  var hello2 = FeedbackTDG1.getResolvedFeedback();
  @* var value = @ViewData["fbTypeKey"]; *@
}
@{
  ViewData["Title"] = "Administrator Feedback System";
}

<div class="text-center">
  <h1 class="display-4">Feedback System</h1>
  <form class="form-inline" method="post" asp-controller="Feedback" asp-action="feedbackAdmin">
    <div class="form-group">
      <label class="fbTypeFilter" for="FeedbackStatus">Status:</label>
      <select class="form-control fbTypeFilter" id="FeedbackStatus" name="fbType">
        <option value="1">All</option>
        <option value="2">Pending</option>
        <option value="3">Resolved</option>
      </select>
    </div>
     <button type="submit" id="fbSubmitBtnUpdate" class="btn btn-success fbTypeFilter">Get Results</button>
  </form>
</div>
<div>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th scope="col">Feedback ID</th>
        <th scope="col">Content</th>
        <th scope="col">Household Email</th>
        <th scope="col">Topic</th>
        <th scope="col">Status</th>
      </tr>
    </thead>
    <tbody>
      @if ((int)(ViewData["fbTypeKey"]) == 1)
      {
          @for (int i = 0; i < hello.Count; i++)
      {
        <tr>
          @* feedbackId *@
          <th scope="row"><a runat="server" href='@Url.Action("feedbackAdminReply", "Feedback")'; onclick="SetData(this)" value=@hello[i][0] name="feedbackId">@hello[i][0]</a></th>
         
          @* hosueholdContent *@
          <td>@hello[i][1]</td>
          @* hosueholdEmail *@
          <td>@hello[i][2]</td>

          @* feedbackType *@
          <td>@hello[i][4]</td>

         @* feedbackStatus *@
          <td>@hello[i][3]</td>
        </tr>
      }
      }
      else if ((int)(ViewData["fbTypeKey"]) == 2){
         @for (int i = 0; i < hello1.Count; i++)
      {
        <tr>
          @* feedbackId *@
          <th scope="row"><a href='@Url.Action("feedbackAdminReply", "Feedback")' ;>@hello1[i][0]</a></th>
          @* hosueholdEmail *@
          <td>@hello1[i][1]</td>
          @* hosueholdEmail *@
          <td>@hello1[i][2]</td>

          @* feedbackType *@
          <td>@hello1[i][4]</td>

          @* feedbackStatus *@
          <td>@hello1[i][3]</td>
        </tr>
      }
      }
      else{
         @for (int i = 0; i < hello2.Count; i++)
      {
        <tr>
          @* feedbackId *@
          <th scope="row"><a href='@Url.Action("feedbackAdminReply", "Feedback")' ;>@hello2[i][0]</a></th>
          @* hosueholdEmail *@
          <td>@hello2[i][1]</td>
          @* hosueholdEmail *@
          <td>@hello2[i][2]</td>

          @* feedbackType *@
          <td>@hello2[i][4]</td>

          @* feedbackStatus *@
          <td>@hello2[i][3]</td>

        </tr>
      }
      }
      


    </tbody>
  </table>
</div>
  <script type="text/javascript">
    function SetData(obj){
        var obj.href=obj.href+"&Text"=obj.innerHTML;
    }
    </script>